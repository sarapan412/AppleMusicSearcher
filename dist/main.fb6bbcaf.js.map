{"version":3,"sources":["node_modules/fetch-jsonp/build/fetch-jsonp.js","js/validation.js","js/main.js"],"names":["isEmpty","value","trim","length","showAlert","message","className","div","document","createElement","appendChild","createTextNode","jumbotron","querySelector","form","insertBefore","setTimeout","remove","searchForm","addEventListener","fetchMusic","e","preventDefault","searchText","fetchUrl","then","res","json","data","showMusic","results","catch","err","console","log","musics","innerHTML","i","music","kind","classList","add","artworkUrl100","trackName","artistName","collectionName","primaryGenreName","releaseDate","split","previewUrl","trackViewUrl"],"mappings":"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","file":"main.fb6bbcaf.js","sourceRoot":"..","sourcesContent":["(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n      if (options.nonce) {\n        jsonpScript.setAttribute('nonce', options.nonce);\n      }\n      if (options.referrerPolicy) {\n        jsonpScript.setAttribute('referrerPolicy', options.referrerPolicy);\n      }\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout);\n\n      // Caught if got 404/500\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","\n\nexport const isEmpty = value => value.trim().length === 0;\n\nexport function showAlert (message, className) {\n    //creat a div\n    const div = document.createElement('div');\n    //add classes\n    div.className = `alert alert-${className}`;\n    //add text\n    div.appendChild(document.createTextNode(message));\n\n    //get jumbotron\n    const jumbotron = document.querySelector('#jumbotron');\n\n    //get form div\n    const form = document.querySelector('#form-div');\n    //insert alert\n    jumbotron.insertBefore(div,form);\n\n    setTimeout(() => document.querySelector(\".alert\").remove(),3000);\n\n\n\n\n\n\n}","\nimport fetchJsonp from 'fetch-jsonp';\n\n//import validation and showAlert\nimport {showAlert, isEmpty} from './validation'\n\n//get searchform element\nconst searchForm = document.querySelector(\"#search-form\");\n\n//submit searchform\nsearchForm.addEventListener(\"submit\",fetchMusic);\n\n//fetch music data from apple music API\nfunction fetchMusic(e) {\n    e.preventDefault();\n\n    const searchText = document.querySelector(\"#search-text\").value;\n\n\n    // if(isEmpty(searchText)) {\n    //     showAlert(\"Please search something.\", 'warning');\n    //     return;\n    // }\n\n    const fetchUrl = `http://itunes.apple.com/search?term=${searchText}`;\n\n    fetchJsonp(fetchUrl)\n        .then(res => res.json())\n        .then(data => showMusic(data.results))\n        .catch(err => console.log(err));\n}\n\n//show each music in card\nfunction showMusic(musics){\n\n    console.log(musics);\n    const results = document.querySelector('#results');\n\n\n    //clear first\n    results.innerHTML = \"\";\n\n\n    for(let i = 0; i < musics.length; i++) {\n        const music = musics[i];\n\n        if (music.kind != 'song') {\n            continue;\n        }\n\n        const div = document.createElement('div');\n        div.classList.add('row');\n        div.innerHTML = `\n            <img class = \"card-img-top\" src=${music.artworkUrl100} alt=\"Album Image\">\n            <div class=\"card-body\">\n                <h5 class=\"card-title\">${music.trackName}</h5>\n                <p class=\"card-text\">${music.artistName}</p>\n            </div>\n\n            <ul>\n\n                <li class = \"list-group list-group-flush\">${music.collectionName}</li>\n                <li class = \"list-group-item\">${music.primaryGenreName} Â· ${music.releaseDate.split('-',1)}</li>\n\n                <li class = \"list-group-item\">\n                    Sample: <br>\n                    <audio src=${music.previewUrl} controls = 'controls'></audio>\n                </li>\n            </ul>\n\n            <div class=\"card-body\">\n                <a href = ${music.trackViewUrl} class = \"card-link\">Shown in Apple Music</a>\n\n            </div>\n`;\n\n\n        results.appendChild(div);\n    }\n\n\n}\n\n\n\n"]}